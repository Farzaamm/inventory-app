<!DOCTYPE html>
<html lang="en">
<%- include('../partials/head') %>
<body>
    <%-include('../partials/nav') %>

    <h1>Edit the Book Details</h1>
    <form action="/books/<%= book.id %>/edit" method="POST">
        <div>
            <label for="title">Title:</label>
            <input type="text" id="title" name="title" value="<%= book.title %>" required>
        </div>
        <div>
            <label for="author">Author:</label>
            <input type="text" id="author" name="author" value="<%= book.author %>" required>
        </div>
        <div>
            <label for="genre">Genre:</label>
            <input type="text" id="genre" name="genre" value="<%= book.genre %>" required>
        </div>
        <div>
            <label for="year">Publishing Year:</label>
            <input type="date" id="publication_date" name="publication_date" value="<%= book.publication_date.toISOString().split('T')[0] %>" required>
        </div>
        <div>
            <label for="isbn">ISBN:</label>
            <input type="text" id="isbn" name="isbn" value="<%= book.isbn %>" required>
        </div>
        <div>
            <label for="price">Price:</label>
            <input type="text" id="price" name="price" value="<%= book.price %>" required>
        </div>
        <div>
            <label for="publisher">publisher:</label>
            <input type="text" id="publisher" name="publisher" value="<%= book.publisher %>" required>
        </div>
        <div>
            <label for="page_count">Page Count:</label>
            <input type="number" id="page_count" name="page_count" value="<%= book.page_count %>" required>
        </div>
        <div>
            <label for="language">language:</label>
            <input type="text" id="language" name="language" value="<%= book.language %>" required>
        </div>
        <div>
            <label for="availabile">Availability:</label>
            <input type="checkbox" id="available" name="available" checked="<%= book.available %>" required>
        </div>
        <div>
            <label for="summary">Summary:</label>
            <textarea id="summary" name="summary"  required><%= book.summary %></textarea>
        </div>
        <button type="submit" class="btn" onclick="return confirm('Are you sure you want to update this book?')">Update Book</button>
    </form>

    <p>Return to <a href="/books">Books List</a></p>
    <%- include('../partials/footer') %>

    <script>
        

        const input = document.getElementById('date');
        input.addEventListener('change', () => {
            const date = new Date(input.value);
            const formatted =
                `${String(date.getMonth() +1).padStart(2, '0')}/${String(date.getDate()).padStart(2, '0')}/${date.getFullYear()}`;
                input.value = formatted;
            console.log(formatted);
        })
    </script>
</body>
</html>

<!-- 

onclick="updateBook('<%= book.id %>')"

function updateBook(id) {
            if (confirm('Are you sure you want to update this book?')) {
                fetch(`/books/edit/${id}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        title: document.getElementById('title').value,
                        author: document.getElementById('author').value,
                        genre: document.getElementById('genre').value,
                        publication_date: document.getElementById('publication_date').value,
                        isbn: document.getElementById('isbn').value,
                        price: document.getElementById('price').value,
                        publisher: document.getElementById('publisher').value,
                        page_count: document.getElementById('page_count').value,
                        language: document.getElementById('language').value,
                        available: document.getElementById('available').checked,
                        summary: document.getElementById('summary').value
                    })
            })
            .then(response => response.json())
            .then(data => {
                alert('Book updated successfully');
                window.location.href = data.redirect;
            })
            .catch(error => console.error('Error:', error));
            }
        }
 -->